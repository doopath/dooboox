{"ast":null,"code":"import _objectSpread from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/doopath/Files/coderpool/React/dooboox/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/doopath/Files/coderpool/React/dooboox/src/components/pages/Engines/PageEngine.tsx\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { AbstractPage } from \"../AbstractPage\";\nimport { LinksBlock } from \"../template/LinksBlock\";\nimport { Text } from \"../template/Text\";\nimport { ImageBlock } from \"../template/ImageBlock\";\nimport { CodeBlock } from \"../template/CodeBlock\";\nimport { Title } from \"../template/Title\";\nimport { ThemesBlockEngine } from \"./ThemesBlockEngine\";\nimport { AuthorBlockEngine } from \"./AuthorBlockEngine\";\nimport { PaginationEngine } from \"./PaginationEngine\";\nexport var PageEngine = /*#__PURE__*/function (_AbstractPage) {\n  _inherits(PageEngine, _AbstractPage);\n\n  function PageEngine(props) {\n    var _this;\n\n    _classCallCheck(this, PageEngine);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PageEngine).call(this, props));\n    _this.page = void 0;\n    _this.pagination = void 0;\n\n    _this.getElement = function () {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, _this.page || \"\");\n    };\n\n    _this.create = function () {\n      try {\n        _this.page = _this.props[\"currentPage\"].map(function (item) {\n          return _this.createElement(item);\n        });\n      } catch (e) {\n        _this.props[\"logger\"].log(e);\n      }\n    };\n\n    _this.addNewText = function (source, id) {\n      axios[\"get\"](source).then(function (response) {\n        _this.props[\"actionCreator\"](\"ADD_NEW_TEXT\", {\n          name: id,\n          text: response[\"data\"]\n        });\n      });\n    };\n\n    _this.createElement = function (pageElement) {\n      if (pageElement[\"name\"] === \"title\") {\n        return /*#__PURE__*/React.createElement(Title, {\n          value: pageElement[\"value\"],\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 14\n          }\n        });\n      } else if (pageElement[\"name\"] === \"imageBlock\") {\n        return /*#__PURE__*/React.createElement(ImageBlock, {\n          image: pageElement[\"items\"].image,\n          id: pageElement[\"items\"].id,\n          sublinks: _toConsumableArray(pageElement[\"items\"].sublinks || []),\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 9\n          }\n        });\n      } else if (pageElement[\"name\"] === \"codeBox\") {\n        return /*#__PURE__*/React.createElement(CodeBlock, {\n          lines: _toConsumableArray(pageElement[\"items\"].codeLines),\n          result: _toConsumableArray(pageElement[\"items\"].resultLines),\n          highlight: _this.props[\"syntaxHighlight\"].highlight,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 9\n          }\n        });\n      } else if (pageElement[\"name\"] === \"themes\") {\n        var themesBlock = new ThemesBlockEngine(pageElement[\"items\"]);\n        themesBlock.create();\n        return themesBlock.getElement();\n      } else if (pageElement[\"name\"] === \"links\") {\n        return /*#__PURE__*/React.createElement(LinksBlock, {\n          links: _toConsumableArray(pageElement[\"items\"]),\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 14\n          }\n        });\n      } else if (pageElement[\"name\"] === \"text\") {\n        if (Object.keys(_this.props[\"texts\"]).length === 0) {\n          _this.addNewText(pageElement[\"source\"], pageElement[\"id\"]);\n        }\n\n        return /*#__PURE__*/React.createElement(Text, {\n          value: [_this.props[\"texts\"][pageElement[\"id\"]]],\n          id: pageElement[\"id\"],\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 14\n          }\n        });\n      } else if (pageElement[\"name\"] === \"authorBlock\") {\n        var element = _this.props[\"authors\"][pageElement[\"id\"]];\n\n        if (!element && Object.keys(_this.props[\"authors\"]).length === 0) {\n          var authorBlock = new AuthorBlockEngine({\n            author: pageElement,\n            actionCreator: _this.props[\"actionCreator\"],\n            location: _this.props[\"location\"],\n            nameHighlighter: _this.props[\"nameHighlighter\"]\n          });\n          authorBlock.create();\n          return /*#__PURE__*/React.createElement(React.Fragment, null);\n        } else {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, element);\n        }\n      } else {\n        throw new Error(\"Page engine got a unknown page element from server!\");\n      }\n    };\n\n    _this.createPagination = function (pageId, nextPage) {\n      var pagination = new PaginationEngine(_objectSpread({}, _this.props, {\n        pageId: pageId,\n        nextPage: nextPage,\n        setPage: _this.setPage,\n        setPageSearcherValue: _this.setPageSearcherValue\n      }));\n      pagination.create();\n      _this.pagination = pagination.getElement();\n    };\n\n    _this.getPagination = function () {\n      return _this.pagination;\n    };\n\n    _this.page = [];\n    _this.pagination = /*#__PURE__*/React.createElement(React.Fragment, null);\n    return _this;\n  }\n\n  return PageEngine;\n}(AbstractPage);","map":{"version":3,"sources":["/home/doopath/Files/coderpool/React/dooboox/src/components/pages/Engines/PageEngine.tsx"],"names":["React","axios","AbstractPage","LinksBlock","Text","ImageBlock","CodeBlock","Title","ThemesBlockEngine","AuthorBlockEngine","PaginationEngine","PageEngine","props","page","pagination","getElement","create","map","item","createElement","e","log","addNewText","source","id","then","response","name","text","pageElement","image","sublinks","codeLines","resultLines","highlight","themesBlock","Object","keys","length","element","authorBlock","author","actionCreator","location","nameHighlighter","Error","createPagination","pageId","nextPage","setPage","setPageSearcherValue","getPagination"],"mappings":"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","sourcesContent":["import React, { ReactElement } from \"react\";\nimport axios from \"axios\";\nimport { AbstractPage } from \"../AbstractPage\";\n\nimport { LinksBlock } from \"../template/LinksBlock\";\nimport { Text } from \"../template/Text\";\nimport { ImageBlock } from \"../template/ImageBlock\";\nimport { CodeBlock } from \"../template/CodeBlock\";\nimport { Title } from \"../template/Title\";\n\nimport { Engine } from \"./Engine\";\nimport { ThemesBlockEngine } from \"./ThemesBlockEngine\";\nimport { AuthorBlockEngine } from \"./AuthorBlockEngine\";\nimport { PaginationEngine } from \"./PaginationEngine\";\n\nexport abstract class PageEngine extends AbstractPage implements Engine {\n  private page: Array<object>;\n  private pagination: JSX.Element;\n\n  public constructor(props: object) {\n    super(props);\n    this.page = [];\n    this.pagination = <></>;\n  }\n\n  public getElement = (): JSX.Element => {\n    return <>{this.page || \"\"}</>;\n  };\n\n  public create = (): void => {\n    try {\n      this.page = this.props[\"currentPage\"].map((item: object): object => {\n        return this.createElement(item);\n      });\n    } catch (e) {\n      this.props[\"logger\"].log(e);\n    }\n  };\n\n  private addNewText = (source: string, id: number): void | never => {\n    axios[\"get\"](source).then((response: object) => {\n      this.props[\"actionCreator\"](\"ADD_NEW_TEXT\", {\n        name: id,\n        text: response[\"data\"],\n      });\n    });\n  };\n\n  private createElement = (pageElement: object): JSX.Element => {\n    if (pageElement[\"name\"] === \"title\") {\n      return <Title value={pageElement[\"value\"]} />;\n    } else if (pageElement[\"name\"] === \"imageBlock\") {\n      return (\n        <ImageBlock\n          image={pageElement[\"items\"].image}\n          id={pageElement[\"items\"].id}\n          sublinks={[...(pageElement[\"items\"].sublinks || [])]}\n        />\n      );\n    } else if (pageElement[\"name\"] === \"codeBox\") {\n      return (\n        <CodeBlock\n          lines={[...pageElement[\"items\"].codeLines]}\n          result={[...pageElement[\"items\"].resultLines]}\n          highlight={this.props[\"syntaxHighlight\"].highlight}\n        />\n      );\n    } else if (pageElement[\"name\"] === \"themes\") {\n      const themesBlock: ThemesBlockEngine = new ThemesBlockEngine(pageElement[\"items\"]);\n      themesBlock.create();\n      return themesBlock.getElement();\n    } else if (pageElement[\"name\"] === \"links\") {\n      return <LinksBlock links={[...pageElement[\"items\"]]} />;\n    } else if (pageElement[\"name\"] === \"text\") {\n      if (Object.keys(this.props[\"texts\"]).length === 0) {\n        this.addNewText(pageElement[\"source\"], pageElement[\"id\"]);\n      }\n\n      return <Text value={[this.props[\"texts\"][pageElement[\"id\"]]]} id={pageElement[\"id\"]} />;\n    } else if (pageElement[\"name\"] === \"authorBlock\") {\n      let element: object | undefined = this.props[\"authors\"][pageElement[\"id\"]];\n      if (!element && Object.keys(this.props[\"authors\"]).length === 0) {\n        let authorBlock = new AuthorBlockEngine({\n          author: pageElement,\n          actionCreator: this.props[\"actionCreator\"],\n          location: this.props[\"location\"],\n          nameHighlighter: this.props[\"nameHighlighter\"],\n        });\n        authorBlock.create();\n        return <></>;\n      } else {\n        return <>{element}</>;\n      }\n    } else {\n      throw new Error(\"Page engine got a unknown page element from server!\");\n    }\n  };\n\n  protected createPagination = (pageId: number, nextPage: boolean): void => {\n    const pagination = new PaginationEngine({\n      ...this.props,\n      pageId,\n      nextPage,\n      setPage: this.setPage,\n      setPageSearcherValue: this.setPageSearcherValue,\n    });\n    pagination.create();\n    this.pagination = pagination.getElement();\n  };\n\n  protected getPagination = (): JSX.Element => {\n    return this.pagination;\n  };\n}\n"]},"metadata":{},"sourceType":"module"}